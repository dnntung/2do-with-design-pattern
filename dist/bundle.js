(()=>{"use strict";var t=function(){function t(t,e){this._controller=t,this._data=e}return t.prototype.restore=function(){this._controller.setTodoItems(this._data)},t}(),e=function(){function t(t,e,o){this._id=t,this._title=e,this._desc=o,this._createdAt=new Date,this._updatedAt=new Date,this._completed=!1}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"desc",{get:function(){return this._desc},set:function(t){this._desc=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return this._completed},set:function(t){this._completed=t},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){this._title=t,this._desc=e,this._updatedAt=new Date},t}(),o=function(){function t(){}return t.prototype.render=function(t){var e=document.createElement("li");return e.appendChild(this._renderTitle(t.title)),e.appendChild(this._renderSubtitle(t.desc)),e.appendChild(this._renderTodoStatus(t.completed)),e},t.prototype._renderTitle=function(t){var e=document.createElement("h5");return e.innerText=t,e},t.prototype._renderSubtitle=function(t){var e=document.createElement("p");return e.innerText=t,e},t.prototype._renderTodoStatus=function(t){var e=document.createElement("input");return e.setAttribute("type","checkbox"),e.checked=t,e},t}(),n=function(){function t(){this._todoRenderer=new o}return t.prototype.render=function(t){var e=this,o=document.createElement("ul");t.map((function(t){return o.appendChild(e._renderTodoItem(t))}))},t.prototype._renderTodoItem=function(t){return this._todoRenderer.render(t)},t}(),r=function(){function t(){this._renderer=new n}return t.prototype._saveToStorage=function(t){localStorage.setItem("todo_items",JSON.stringify(t))},t.prototype.update=function(t){this._saveToStorage(t),this._renderer.render(t)},t}(),i=function(){function o(){try{this._todoItems=JSON.parse(localStorage.getItem("todo_items"))}catch(t){this._todoItems=[]}this._observerManager.subscribe(new r)}return o.prototype.setTodoItems=function(t){this._todoItems=t,this._observerManager.notify(this._todoItems)},o.getInstance=function(){return this._controller||(this._controller=new this),this._controller},o.prototype.createTodo=function(t,o){this._todoItems.push(new e(this._todoItems.length,t,o)),this._observerManager.notify(this._todoItems)},o.prototype.editTodo=function(t,e,o){this._todoItems.find((function(e){return e.id===t})).update(e,o),this._observerManager.notify(this._todoItems)},o.prototype.removeTodo=function(t){this._todoItems=this._todoItems.filter((function(e){return e.id!=t})),this._observerManager.notify(this._todoItems)},o.prototype.saveHistory=function(){this._history=new t(this,this._todoItems)},o.prototype.rollbackFromHistory=function(){this._history.restore()},o}();window.addEventListener("load",(function(){i.getInstance(),console.log("Loaded")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T3BELEtBQUs0QyxhQUkvQixFQUFBUyxZQUFQLFdBS0ksT0FKS3JELEtBQUtDLGNBQ05ELEtBQUtDLFlBQWMsSUFBSUQsTUFHcEJBLEtBQUtDLGFBR2hCLFlBQUFxRCxXQUFBLFNBQVdoRCxFQUFlQyxHQUN0QlAsS0FBSzRDLFdBQVdXLEtBQUssSUFBSUMsRUFBU3hELEtBQUs0QyxXQUFXYSxPQUFRbkQsRUFBT0MsSUFDaEVQLEtBQUtnRCxpQkFBaUJJLE9BQU9wRCxLQUFLNEMsYUFHdkMsWUFBQWMsU0FBQSxTQUFTckQsRUFBWUMsRUFBZUMsR0FDTFAsS0FBSzRDLFdBQVdlLE1BQUssU0FBQXhCLEdBQVEsT0FBQUEsRUFBSzlCLEtBQU9BLEtBQzNEVyxPQUFPVixFQUFPQyxHQUN2QlAsS0FBS2dELGlCQUFpQkksT0FBT3BELEtBQUs0QyxhQUd0QyxZQUFBZ0IsV0FBQSxTQUFXdkQsR0FDUEwsS0FBSzRDLFdBQVk1QyxLQUFLNEMsV0FBV2lCLFFBQU8sU0FBQTFCLEdBQVEsT0FBQUEsRUFBSzlCLElBQU1BLEtBQzNETCxLQUFLZ0QsaUJBQWlCSSxPQUFPcEQsS0FBSzRDLGFBSXRDLFlBQUFrQixZQUFBLFdBQ0k5RCxLQUFLK0QsU0FBWSxJQUFJQyxFQUFnQmhFLEtBQU1BLEtBQUs0QyxhQUdwRCxZQUFBcUIsb0JBQUEsV0FDSWpFLEtBQUsrRCxTQUFTNUQsV0FFdEIsRUF2REEsR0NKQStELE9BQU9DLGlCQUFpQixRQUFRLFdBRVdDLEVBQWVmLGNBRXREZ0IsUUFBUUMsSUFBSSxjIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0LXdpdGgtZGVzaWduLXBhdHRlcm4vLi9zcmMvbW9kdWxlcy9IaXN0b3J5LnRzIiwid2VicGFjazovL3RvZG8tbGlzdC13aXRoLWRlc2lnbi1wYXR0ZXJuLy4vc3JjL21vZHVsZXMvVG9kby50cyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qtd2l0aC1kZXNpZ24tcGF0dGVybi8uL3NyYy9tb2R1bGVzL1RvZG9JdGVtUmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LXdpdGgtZGVzaWduLXBhdHRlcm4vLi9zcmMvbW9kdWxlcy9Ub2RvTGlzdFJlbmRlcmVyLnRzIiwid2VicGFjazovL3RvZG8tbGlzdC13aXRoLWRlc2lnbi1wYXR0ZXJuLy4vc3JjL21vZHVsZXMvVG9kb09ic2VydmVyLnRzIiwid2VicGFjazovL3RvZG8tbGlzdC13aXRoLWRlc2lnbi1wYXR0ZXJuLy4vc3JjL21vZHVsZXMvVG9kb0NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0LXdpdGgtZGVzaWduLXBhdHRlcm4vLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVG9kb0l0ZW0gfSBmcm9tIFwiLi9Ub2RvXCI7XHJcbmltcG9ydCB7IFRvZG9Db250cm9sbGVyIH0gZnJvbSBcIi4vVG9kb0NvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaXN0b3J5U25hcHNob3Qge1xyXG4gICAgcHJpdmF0ZSBfY29udHJvbGxlcjogVG9kb0NvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIF9kYXRhOiBUb2RvSXRlbVtdXHJcblxyXG4gICAgY29uc3RydWN0b3IoY29udHJvbGxlcjogVG9kb0NvbnRyb2xsZXIsIGRhdGE6IFRvZG9JdGVtW10pIHtcclxuICAgICAgICB0aGlzLl9jb250cm9sbGVyID0gY29udHJvbGxlcjtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YVxyXG4gICAgfVxyXG5cclxuICAgIHJlc3RvcmUoKSB7XHJcbiAgICAgICAgdGhpcy5fY29udHJvbGxlci5zZXRUb2RvSXRlbXModGhpcy5fZGF0YSlcclxuICAgIH1cclxufSIsIlxyXG5leHBvcnQgY2xhc3MgVG9kb0l0ZW0gIHtcclxuICAgIHByaXZhdGUgX2lkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIF90aXRsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfZGVzYzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfY3JlYXRlZEF0OiBEYXRlO1xyXG4gICAgcHJpdmF0ZSBfdXBkYXRlZEF0OiBEYXRlO1xyXG4gICAgcHJpdmF0ZSBfY29tcGxldGVkOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHRpdGxlOiBzdHJpbmcsIGRlc2M6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZVxyXG4gICAgICAgIHRoaXMuX2Rlc2MgPSBkZXNjXHJcbiAgICAgICAgdGhpcy5fY3JlYXRlZEF0ID0gbmV3IERhdGUoKVxyXG4gICAgICAgIHRoaXMuX3VwZGF0ZWRBdCA9IG5ldyBEYXRlKClcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZWQgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faWRcclxuICAgIH1cclxuXHJcbiAgICBnZXQgdGl0bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpdGxlXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGRlc2MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY29tcGxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wbGV0ZWRcclxuICAgIH1cclxuXHJcbiAgICBzZXQgdGl0bGUodGl0bGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGVcclxuICAgIH1cclxuXHJcbiAgICBzZXQgZGVzYyhkZXNjOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9kZXNjID0gZGVzY1xyXG4gICAgfVxyXG5cclxuICAgIHNldCBjb21wbGV0ZWQoY29tcGxldGVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgIHRoaXMuX2NvbXBsZXRlZCA9IGNvbXBsZXRlZFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aXRsZTogc3RyaW5nLCBkZXNjOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlXHJcbiAgICAgICAgdGhpcy5fZGVzYyA9IGRlc2NcclxuICAgICAgICB0aGlzLl91cGRhdGVkQXQgPSBuZXcgRGF0ZSgpXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL1JlbmRlcmVyXCI7XHJcbmltcG9ydCB7IFRvZG9JdGVtIH0gZnJvbSBcIi4vVG9kb1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvZG9JdGVtUmVuZGVyZXIgaW1wbGVtZW50cyBSZW5kZXJlcjxUb2RvSXRlbT4ge1xyXG4gICAgLy8gRmFjYWRlIFxyXG4gICAgcmVuZGVyKGRhdGE6IFRvZG9JdGVtKTogTm9kZSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpXHJcblxyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yZW5kZXJUaXRsZShkYXRhLnRpdGxlKSlcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcmVuZGVyU3VidGl0bGUoZGF0YS5kZXNjKSlcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcmVuZGVyVG9kb1N0YXR1cyhkYXRhLmNvbXBsZXRlZCkpXHJcblxyXG4gICAgICAgIHJldHVybiBjb250YWluZXJcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZW5kZXJUaXRsZSh0aXRsZTogc3RyaW5nKTpOb2RlIHtcclxuICAgICAgICBjb25zdCB0aXRsZUVsID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNVwiKVxyXG4gICAgICAgIHRpdGxlRWwuaW5uZXJUZXh0ID0gdGl0bGVcclxuXHJcbiAgICAgICAgcmV0dXJuIHRpdGxlRWxcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9yZW5kZXJTdWJ0aXRsZShzdWJ0aXRsZTogc3RyaW5nKTpOb2RlIHtcclxuICAgICAgICBjb25zdCBzdWJ0aXRsZUVsID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXHJcbiAgICAgICAgc3VidGl0bGVFbC5pbm5lclRleHQgPSBzdWJ0aXRsZVxyXG5cclxuICAgICAgICByZXR1cm4gc3VidGl0bGVFbFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3JlbmRlclRvZG9TdGF0dXMoY29tcGxldGVkOiBib29sZWFuKTpOb2RlIHtcclxuICAgICAgICBjb25zdCBjaGVja0JveEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXHJcbiAgICAgICAgY2hlY2tCb3hFbC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIik7XHJcbiAgICAgICAgY2hlY2tCb3hFbC5jaGVja2VkID0gY29tcGxldGVkXHJcblxyXG4gICAgICAgIHJldHVybiBjaGVja0JveEVsXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL1JlbmRlcmVyXCJcclxuaW1wb3J0IHsgVG9kb0l0ZW0gfSBmcm9tIFwiLi9Ub2RvXCJcclxuaW1wb3J0IHsgVG9kb0l0ZW1SZW5kZXJlciB9IGZyb20gXCIuL1RvZG9JdGVtUmVuZGVyZXJcIlxyXG5cclxuZXhwb3J0IGNsYXNzIFRvZG9MaXN0UmVuZGVyZXIgaW1wbGVtZW50cyBSZW5kZXJlcjxUb2RvSXRlbVtdPiB7XHJcbiAgICBwcml2YXRlIF90b2RvUmVuZGVyZXI6IFRvZG9JdGVtUmVuZGVyZXIgPSBuZXcgVG9kb0l0ZW1SZW5kZXJlcigpXHJcbiAgICBcclxuICAgIC8vIEZhY2FkZSBcclxuICAgIHJlbmRlcihkYXRhOiBUb2RvSXRlbVtdKTogTm9kZSB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpXHJcblxyXG4gICAgICAgIGRhdGEubWFwKChpdGVtOiBUb2RvSXRlbSkgPT4gY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3JlbmRlclRvZG9JdGVtKGl0ZW0pKSlcclxuXHJcbiAgICAgICAgcmV0dXJuIFxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX3JlbmRlclRvZG9JdGVtKGl0ZW06IFRvZG9JdGVtKTogTm9kZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RvZG9SZW5kZXJlci5yZW5kZXIoaXRlbSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IE9ic2VydmVyIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvT2JzZXJ2ZXJcIjtcclxuaW1wb3J0IHsgVG9kb0l0ZW0gfSBmcm9tIFwiLi9Ub2RvXCI7XHJcbmltcG9ydCB7IFRvZG9MaXN0UmVuZGVyZXIgfSBmcm9tIFwiLi9Ub2RvTGlzdFJlbmRlcmVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVG9kb09ic2VydmVyIGltcGxlbWVudHMgT2JzZXJ2ZXIge1xyXG4gICAgcHJpdmF0ZSBfcmVuZGVyZXI6IFRvZG9MaXN0UmVuZGVyZXJcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSBuZXcgVG9kb0xpc3RSZW5kZXJlcigpXHJcbiAgICB9O1xyXG5cclxuICAgIHByaXZhdGUgX3NhdmVUb1N0b3JhZ2UoZGF0YTogYW55KSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2RvX2l0ZW1zXCIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShkYXRhOiBUb2RvSXRlbVtdKSB7XHJcbiAgICAgICAgdGhpcy5fc2F2ZVRvU3RvcmFnZShkYXRhKVxyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyLnJlbmRlcihkYXRhKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSGlzdG9yeVNuYXBzaG90IH0gZnJvbSBcIi4vSGlzdG9yeVwiO1xyXG5pbXBvcnQgeyBPYnNlcnZlck1hbmFnZXIgfSBmcm9tIFwiLi9PYnNlcnZlck1hbmFnZXJcIjtcclxuaW1wb3J0IHsgVG9kb0l0ZW0gfSBmcm9tIFwiLi9Ub2RvXCI7XHJcbmltcG9ydCB7IFRvZG9MaXN0ZW5lciB9IGZyb20gXCIuL1RvZG9MaXN0ZW5lclwiO1xyXG5pbXBvcnQgeyBUb2RvT2JzZXJ2ZXIgfSBmcm9tIFwiLi9Ub2RvT2JzZXJ2ZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb2RvQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIF90b2RvSXRlbXM6IFRvZG9JdGVtW107XHJcbiAgICBwcml2YXRlIHN0YXRpYyBfY29udHJvbGxlcjogVG9kb0NvbnRyb2xsZXI7XHJcbiAgICBwcml2YXRlIF9oaXN0b3J5OiBIaXN0b3J5U25hcHNob3RcclxuICAgIHByaXZhdGUgX29ic2VydmVyTWFuYWdlcjogT2JzZXJ2ZXJNYW5hZ2VyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZG9JdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b2RvX2l0ZW1zXCIpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdG9kb0l0ZW1zID0gW11cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX29ic2VydmVyTWFuYWdlci5zdWJzY3JpYmUobmV3IFRvZG9PYnNlcnZlcigpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFRvZG9JdGVtcyh0b2RvSXRlbXM6IFRvZG9JdGVtW10pIHtcclxuICAgICAgICB0aGlzLl90b2RvSXRlbXMgPSB0b2RvSXRlbXNcclxuICAgICAgICB0aGlzLl9vYnNlcnZlck1hbmFnZXIubm90aWZ5KHRoaXMuX3RvZG9JdGVtcylcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW5nbGV0b24gXHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVG9kb0NvbnRyb2xsZXIge1xyXG4gICAgICAgIGlmICghdGhpcy5fY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jb250cm9sbGVyID0gbmV3IHRoaXMoKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRyb2xsZXJcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUb2RvKHRpdGxlOiBzdHJpbmcsIGRlc2M6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3RvZG9JdGVtcy5wdXNoKG5ldyBUb2RvSXRlbSh0aGlzLl90b2RvSXRlbXMubGVuZ3RoLCB0aXRsZSwgZGVzYykpXHJcbiAgICAgICAgIHRoaXMuX29ic2VydmVyTWFuYWdlci5ub3RpZnkodGhpcy5fdG9kb0l0ZW1zKVxyXG4gICAgfVxyXG5cclxuICAgIGVkaXRUb2RvKGlkOiBudW1iZXIsIHRpdGxlOiBzdHJpbmcsIGRlc2M6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IHRvZG9JdGVtOiBUb2RvSXRlbSA9IHRoaXMuX3RvZG9JdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWQpXHJcbiAgICAgICAgdG9kb0l0ZW0udXBkYXRlKHRpdGxlLCBkZXNjKVxyXG4gICAgICAgIHRoaXMuX29ic2VydmVyTWFuYWdlci5ub3RpZnkodGhpcy5fdG9kb0l0ZW1zKVxyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVRvZG8oaWQ6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX3RvZG9JdGVtcz0gdGhpcy5fdG9kb0l0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgIT0gaWQpXHJcbiAgICAgICAgdGhpcy5fb2JzZXJ2ZXJNYW5hZ2VyLm5vdGlmeSh0aGlzLl90b2RvSXRlbXMpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWVtZW50byBcclxuICAgIHNhdmVIaXN0b3J5KCkge1xyXG4gICAgICAgIHRoaXMuX2hpc3RvcnkgPSAgbmV3IEhpc3RvcnlTbmFwc2hvdCh0aGlzLCB0aGlzLl90b2RvSXRlbXMpXHJcbiAgICB9XHJcblxyXG4gICAgcm9sbGJhY2tGcm9tSGlzdG9yeSgpIHtcclxuICAgICAgICB0aGlzLl9oaXN0b3J5LnJlc3RvcmUoKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVG9kb0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9tb2R1bGVzL1RvZG9Db250cm9sbGVyXCJcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcblxyXG4gICAgY29uc3QgdG9kb0NvbnRyb2xsZXI6IFRvZG9Db250cm9sbGVyID0gVG9kb0NvbnRyb2xsZXIuZ2V0SW5zdGFuY2UoKVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiTG9hZGVkXCIpXHJcblxyXG59KSJdLCJuYW1lcyI6WyJjb250cm9sbGVyIiwiZGF0YSIsInRoaXMiLCJfY29udHJvbGxlciIsIl9kYXRhIiwicmVzdG9yZSIsInNldFRvZG9JdGVtcyIsImlkIiwidGl0bGUiLCJkZXNjIiwiX2lkIiwiX3RpdGxlIiwiX2Rlc2MiLCJfY3JlYXRlZEF0IiwiRGF0ZSIsIl91cGRhdGVkQXQiLCJfY29tcGxldGVkIiwiY29tcGxldGVkIiwidXBkYXRlIiwicmVuZGVyIiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJfcmVuZGVyVGl0bGUiLCJfcmVuZGVyU3VidGl0bGUiLCJfcmVuZGVyVG9kb1N0YXR1cyIsInRpdGxlRWwiLCJpbm5lclRleHQiLCJzdWJ0aXRsZSIsInN1YnRpdGxlRWwiLCJjaGVja0JveEVsIiwic2V0QXR0cmlidXRlIiwiY2hlY2tlZCIsIl90b2RvUmVuZGVyZXIiLCJUb2RvSXRlbVJlbmRlcmVyIiwibWFwIiwiaXRlbSIsIl9yZW5kZXJUb2RvSXRlbSIsIl9yZW5kZXJlciIsIlRvZG9MaXN0UmVuZGVyZXIiLCJfc2F2ZVRvU3RvcmFnZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiX3RvZG9JdGVtcyIsInBhcnNlIiwiZ2V0SXRlbSIsImVyciIsIl9vYnNlcnZlck1hbmFnZXIiLCJzdWJzY3JpYmUiLCJUb2RvT2JzZXJ2ZXIiLCJ0b2RvSXRlbXMiLCJub3RpZnkiLCJnZXRJbnN0YW5jZSIsImNyZWF0ZVRvZG8iLCJwdXNoIiwiVG9kb0l0ZW0iLCJsZW5ndGgiLCJlZGl0VG9kbyIsImZpbmQiLCJyZW1vdmVUb2RvIiwiZmlsdGVyIiwic2F2ZUhpc3RvcnkiLCJfaGlzdG9yeSIsIkhpc3RvcnlTbmFwc2hvdCIsInJvbGxiYWNrRnJvbUhpc3RvcnkiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiVG9kb0NvbnRyb2xsZXIiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==